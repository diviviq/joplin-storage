Популярный open source — часть вторая: 5 инструментов для управления облаком / Блог компании ИТ-ГРАД

В прошлый раз [мы рассказывали](https://habr.com/ru/company/it-grad/blog/436962/) о наиболее популярных и обсуждаемых инструментах и сервисах для работы с логами и базами данных. Тема сегодняшнего материала — _управление контейнерами и балансировка нагрузки в облаке_.

[![](../../_resources/b4056edd22a8429893e11e3c1a1c9ba7.jpeg)](https://habr.com/ru/company/it-grad/blog/438032/)

_/ фото [Nicolas Henderson](https://www.flickr.com/photos/texasbackroads/39273801892/) [CC BY](https://creativecommons.org/licenses/by/2.0/)_

* * *

## [Apache OpenWhisk](https://github.com/apache?q=openwhisk)

* * *

Apache OpenWhisk — открытая облачная платформа для бессерверных (serverless) вычислений. Эта концепция предполагает, что вычислительные ресурсы облака используются как сервисы. Таким образом, разработчикам и администраторам не нужно заботиться об инфраструктуре и обслуживании серверов. Получается, что вопросами масштабируемости, поддержки кода и безопасности окружения занимается OpenWhisk.

Работу над OpenWhisk начали сотрудники IBM Research в 2015 году. А в 2016 году исходный код проекта [появился на GitHub](https://github.com/apache/incubator-openwhisk). Платформа быстро приобрела популярность благодаря активно развивающемуся тренду на бессерверные вычисления. В Markets&Markets [прогнозируют](https://www.marketsandmarkets.com/Market-Reports/function-as-a-service-market-127202409.html), что к 2021 году стоимость этого рынка составит 7,7 млрд долларов (при стоимости 2 млрд в 2016-м). Уже сегодня, помимо IBM, в своих решениях платформу [используют такие компании](https://openwhisk.apache.org/community.html), как Adobe и Naver (самая популярная поисковая система в Южной Корее).

Плюсы платформы оценили и в Red Hat. Представители компании [считают](https://developers.redhat.com/blog/2017/06/07/red-hat-and-apache-openwhisk/), что другие открытые проекты — Fission, Kubeless, IronFunctions — уступают OpenWhisk в объеме кодовой базы, качестве функций и количестве контрибьюторов. Поэтому Red Hat сами работают с OpenWhisk и помогают проекту развиваться.

> Есть и у платформы недостатки. Пользователи отмечают, что у OpenWhisk слишком большой инструментарий. В него входят: CouchDB, Kafka, Nginx, Redis и Zookeeper. Само по себе наличие дополнительной функциональности не является чем-то плохим, просто во всем этом многообразии бывает сложно разобраться.

Кроме того, в 2018 году репутацию OpenWhisk «[подпортили](https://www.theregister.co.uk/2018/07/24/apache_ibm_cloud_vulnerable/)» уязвимости, которые позволяли злоумышленнику при определённых условиях менять пользовательские функции. Их [оперативно закрыли](https://www.computerweekly.com/news/252445500/Apache-OpenWhisk-users-urged-to-patch), но разработчикам [нужно было обновить](https://threatpost.ru/apache-openwhisk-vulnerabilities-could-cause-data-breach/27404/) теги Docker или Git до последней версии. Поэтому точное количество систем, остающихся уязвимыми, неизвестно. Подробнее о защите OpenWhisk можно прочитать в [статье на Medium](https://medium.com/openwhisk/security-and-serverless-functions-b97618430db6). Те же, кто хочет поближе познакомиться с платформой и опробовать её в работе, стоит обратить внимание на [гайд из блога](http://jamesthom.as/blog/2018/01/19/starting-openwhisk-in-sixty-seconds/) Джеймса Томаса (James Thomas), разработчика IBM Cloud.

* * *

## [Pulumi](https://github.com/pulumi)

* * *

Это новая облачная платформа для разработки программ на JavaScript, Python, Go [и др](https://pulumi.io/reference/languages.html). Готовые приложения можно запускать в любом облаке, в том числе с использованием контейнеров Kubernetes. При этом в основе Pulumi лежит концепция программируемой инфраструктуры (infrastructure-as-code). Пользователи получают возможность работать с железом как с кодом (управлять настройками оборудования программно).

Оценить то, насколько эффективным окажется инструмент на реальных проектах, пока сложно. Ряд резидентов Hacker News в тематическом треде [отметили](https://news.ycombinator.com/item?id=17337867), что Pulumi не подходит для работы на bare metal. Плюс у инструмента пока нет каких-либо серьезных преимуществ перед аналогичными инструментами вроде [Terraform](https://www.terraform.io/), который существует на рынке уже четыре года и успел обрести сообщество.

Если вам все же интересно оценить возможности Pulumi, гайд для быстрого старта можно найти в репозитории [на GitHub](https://github.com/pulumi/pulumi).

* * *

## [GLB Director](https://github.com/github/glb-director)

* * *

GLB Director — это балансировщик нагрузки GitHub, доступ к которому разработчики открыли в конце лета прошлого года. Об этом событии мы [рассказывали в одном из материалов нашего блога](https://habr.com/ru/company/it-grad/blog/420093/).

Сам инструмент стал ответом на проблему, с которой столкнулись в компании. Предыдущее решение — haproxy — [не справлялось](https://githubengineering.com/glb-director-open-source-load-balancer/) с нагрузками на GitHub. При использовании haproxy масштабировать сервисы можно только вертикально — добавлять ресурсы процессора, памяти, дисков, что не давало ощутимого прироста производительности. Поэтому разработчики создали своё решение, заточенное под нагрузки веб-сервиса.

> GLB Director не направляет пакеты на единый узел, а [распределяет](https://githubengineering.com/introducing-glb/) их между первичным и вторичным прокси-серверами с помощью системы на базе рандеву-хеширования ([HRW](https://en.wikipedia.org/wiki/Rendezvous_hashing)). Если один сервер «упадет», пакеты перенаправляются на второй. За счет этого балансировщик поддерживает отказоустойчивость TCP-соединений.

Пользователи Hacker News [полагают](https://news.ycombinator.com/item?id=17717386), что сходу понять, как работать с балансировщиком сложно. Однако он оказывается эффективен для распределения нагрузки в крупных дата-центрах. При этом GLB Director может быть неудобным при распределении нагрузки между backend-серверами. Для этой задачи имеет смысл обратить на другое открытое решение — балансировщик [Katran](https://github.com/facebookincubator/katran) от Facebook.

![](../../_resources/3f41a463ac3a4213922629a41b441aca.jpeg)

_/ фото [Christopher A. Dominic](https://www.flickr.com/photos/kestereverts/14333646903/) [CC BY](https://creativecommons.org/licenses/by/2.0/)_

* * *

## [Crossplane](https://github.com/crossplaneio/crossplane)

* * *

Crossplane — открытая мультиоблачная платформа для управления нагрузками. Она позволяет переносить приложения между несколькими облачными средами и не зависит от типов используемых кластеров и библиотек. Платформа помогает разграничить обязанности разработчиков и администраторов, при этом следит за устойчивостью сервисов.

> Архитектура платформы основана на модели распределения ресурсов, которую [использует](https://ru.wikipedia.org/wiki/Kubernetes#%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0_%D0%B8_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D1%8B) Kubernetes. В целом можно сказать, что Crossplane — гибрид Kubernetes и вышеупомянутого Terraform.

Отличие Crossplane в том, что в этой платформе все конфигурационные файлы собраны в одном месте. Однако [есть мнение](https://news.ycombinator.com/item?id=18600603), что новый инструмент придется использовать вместе с Terraform, а не вместо него.

Чтобы познакомиться с платформой на практике, авторы предлагают запустить Wordpress-приложение с помощью [руководства](https://blog.upbound.io/introducing-crossplane-open-source-multicloud-control-plane/) в блоге сообщества.

* * *

## [Titus](https://github.com/Netflix/titus)

* * *

Titus — это платформа для управления контейнерами от Netflix, которая была передана в open source в прошлом году. Она позволяет компании работать с 200 тыс. вычислительных кластеров ежедневно. В основе решения лежит система управления [Apache Mesos](http://mesos.apache.org/), которая объединяет виртуальные машины в один кластер. Аналогичный подход применяется в ядре Linux, когда нужно разделить ресурсы железа между локальными процессами.

Есть [мнение](https://news.ycombinator.com/item?id=16868881), что открытие кода — это попытка Netflix удержать проект «на плаву». Решение для управления контейнерными средами понадобилось Netflix еще до того, как появился Kubernetes. Поэтому у их системы почти нет преимуществ над инструментом Google (выгоду могут получить разве что те компании, которые уже работают с Apache Mesos). Он разрабатывался позже и с прицелом на мультиоблачные среды, поэтому вокруг него уже сформировалось большое комьюнити.

В связи с этим есть вероятность, что в будущем разработчики Netflix сами откажутся от Titus и перейдут на Kubernetes.

* * *

_В следующий раз мы продолжим рассказывать о популярных open source инструментах. Поговорим о решениях, упрощающих задачи разработчиков ПО._

* * *

Материалы из нашего корпоративного блога:

*   [Производители оборудования и IaaS: гонка за облачным трендом](https://iaas-blog.it-grad.ru/tendencii/proizvoditeli-oborudovaniya-i-iaas-gonka-za-oblachnym-trendom/)
*   [Серверы для SAP: основные платформы](https://iaas-blog.it-grad.ru/zhelezo/servery-dlya-sap-osnovnye-platformy/)
*   [Unboxing: блейд-сервер Cisco UCS B480 M5](https://iaas-blog.it-grad.ru/zhelezo/unboxing-blejd-servera-cisco-ucs-b480-m5/)

Дополнительное чтение в нашем Telegram-канале:

*   [Куда движется облачная инфраструктура в 2019-м: 5 трендов](https://t.me/iaasblog/191)
*   [Кого и зачем купили VMware в 2018-м](https://t.me/iaasblog/189)
*   [Зачем VMware vSphere понадобился HTML5-клиент?](https://t.me/iaasblog/190)